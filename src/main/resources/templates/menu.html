<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú Principal - Sistema de Inventarios</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</head>
<body>
<!-- Barra lateral -->
<div th:replace="~{fragments/sidebar :: sidebar}"></div>

<!-- Contenido principal -->
<div class="contenido">
    <h1><ion-icon name="home-outline"></ion-icon> Menú Principal</h1>

    <!-- Mensajes de bienvenida -->
    <div th:if="${success}" class="mensaje-exito">
        <ion-icon name="checkmark-circle"></ion-icon>
        <span th:text="${success}"></span>
    </div>

    <!-- Tarjeta de bienvenida -->
    <div class="card">
        <h2><ion-icon name="cube-outline"></ion-icon> Bienvenido al Sistema de Inventarios</h2>
        <p style="color: #6c757d; line-height: 1.8; margin-bottom: 25px;">
            Sistema integral para la gestión de inventarios de la Cámara de Comercio y Producción de La Libertad.
            Desde aquí puedes gestionar artículos, registrar movimientos, consultar historiales y generar reportes.
        </p>

        <div style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                       padding: 25px; border-radius: 10px; margin: 25px 0;">
            <h3 style="color: #722f37; margin-bottom: 15px;">
                <ion-icon name="information-circle-outline"></ion-icon> Información del Sistema
            </h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                <div>
                    <p><strong><ion-icon name="business-outline"></ion-icon> Institución:</strong></p>
                    <p>Cámara de Comercio y Producción de La Libertad</p>
                </div>
                <div>
                    <p><strong><ion-icon name="person-outline"></ion-icon> Usuario:</strong></p>
                    <p>Departamento de Logística</p>
                </div>
                <div>
                    <p><strong><ion-icon name="calendar-outline"></ion-icon> Último acceso:</strong></p>
                    <p th:text="${#temporals.format(#temporals.createNow(), 'dd/MM/yyyy HH:mm')}"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Grid de características -->
    <div class="features-grid">
        <div class="feature-item">
            <ion-icon name="list-outline"></ion-icon>
            <h3>Mostrar Artículos</h3>
            <p>Consulta el inventario completo con paginación y filtrado avanzado.</p>
            <a th:href="@{/articulos}" class="btn-primary" style="margin-top: 15px;">
                <ion-icon name="eye-outline"></ion-icon> Ver Artículos
            </a>
        </div>

        <div class="feature-item">
            <ion-icon name="add-circle-outline"></ion-icon>
            <h3>Registrar Artículo</h3>
            <p>Agrega nuevos artículos al inventario con códigos automáticos.</p>
            <a th:href="@{/articulos/registrarArticulo}" class="btn-primary" style="margin-top: 15px;">
                <ion-icon name="add-outline"></ion-icon> Nuevo Artículo
            </a>
        </div>

        <div class="feature-item">
            <ion-icon name="create-outline"></ion-icon>
            <h3>Gestionar Artículos</h3>
            <p>Edita o elimina artículos existentes del inventario.</p>
            <a th:href="@{/articulos/gestionar}" class="btn-primary" style="margin-top: 15px;">
                <ion-icon name="settings-outline"></ion-icon> Gestionar
            </a>
        </div>

        <div class="feature-item">
            <ion-icon name="swap-vertical-outline"></ion-icon>
            <h3>Movimientos</h3>
            <p>Registra entradas y salidas de inventario en tiempo real.</p>
            <a th:href="@{/movimientos}" class="btn-primary" style="margin-top: 15px;">
                <ion-icon name="repeat-outline"></ion-icon> Movimientos
            </a>
        </div>

        <div class="feature-item">
            <ion-icon name="time-outline"></ion-icon>
            <h3>Historial</h3>
            <p>Consulta el historial completo de todos los movimientos.</p>
            <a th:href="@{/movimientos/historial}" class="btn-primary" style="margin-top: 15px;">
                <ion-icon name="archive-outline"></ion-icon> Ver Historial
            </a>
        </div>

        <div class="feature-item">
            <ion-icon name="document-text-outline"></ion-icon>
            <h3>Reportes</h3>
            <p>Genera reportes en Excel del inventario actual.</p>
            <a th:href="@{/reportes}" class="btn-primary" style="margin-top: 15px;">
                <ion-icon name="download-outline"></ion-icon> Reportes
            </a>
        </div>
    </div>

    <!-- Estadísticas rápidas -->
    <div class="card" style="margin-top: 30px;">
        <h2><ion-icon name="stats-chart-outline"></ion-icon> Estadísticas Rápidas</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
            <div style="text-align: center; padding: 20px; background: #e9ecef; border-radius: 8px;">
                <ion-icon name="cube-outline" style="font-size: 36px; color: #722f37;"></ion-icon>
                <h3 style="margin: 10px 0 5px 0;">Artículos Activos</h3>
                <p style="font-size: 24px; font-weight: bold; color: #722f37;">--</p>
            </div>
            <div style="text-align: center; padding: 20px; background: #e9ecef; border-radius: 8px;">
                <ion-icon name="arrow-down-circle-outline" style="font-size: 36px; color: #28a745;"></ion-icon>
                <h3 style="margin: 10px 0 5px 0;">Últimas Entradas</h3>
                <p style="font-size: 24px; font-weight: bold; color: #28a745;">--</p>
            </div>
            <div style="text-align: center; padding: 20px; background: #e9ecef; border-radius: 8px;">
                <ion-icon name="arrow-up-circle-outline" style="font-size: 36px; color: #dc3545;"></ion-icon>
                <h3 style="margin: 10px 0 5px 0;">Últimas Salidas</h3>
                <p style="font-size: 24px; font-weight: bold; color: #dc3545;">--</p>
            </div>
            <div style="text-align: center; padding: 20px; background: #e9ecef; border-radius: 8px;">
                <ion-icon name="alert-circle-outline" style="font-size: 36px; color: #ffc107;"></ion-icon>
                <h3 style="margin: 10px 0 5px 0;">Stock Bajo</h3>
                <p style="font-size: 24px; font-weight: bold; color: #ffc107;">--</p>
            </div>
        </div>
    </div>
</div>

<script>
    // Cargar estadísticas (puedes implementar AJAX aquí)
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Menú principal cargado');

        // Actualizar fecha y hora en tiempo real
        function actualizarHora() {
            const ahora = new Date();
            const opciones = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.querySelector('.info-hora').textContent =
                ahora.toLocaleDateString('es-ES', opciones);
        }

        actualizarHora();
        setInterval(actualizarHora, 60000); // Actualizar cada minuto
    });
</script>
</body>
</html>